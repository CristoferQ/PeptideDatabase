<div class="jumbotron mt-4">
    <h1 class="display-4">Peptide Sequence Encoding</h1>
    <br>
    <p class="lead">All applications of Machine Learning and Data Mining algorithms require numerical inputs to apply the different algorithms. Peptipedia has implemented various strategies for encoding amino acid sequences. Classical approaches, including One Hot and frequency of residues strategies and physicochemical properties. Besides, this tool allows Digital Signal Processing Strategies [1] and Natural Language Processing methods [2] for encoding sequences. For encoding sequences, you need to input a Fasta file. The tool will make a validation step of sequences, ignoring those without canonical residues. Next, Peptipedia applies the encoding strategy previously selected, and it is going to a compressed file with all results.</p>
</div>


<div class="card">
    <h5 class="card-header">Inputs</h5>    
    <div class="card-body">
        <form>
            <div class="form-group">
                <label for="exampleFormControlTextarea1">Sequences in FASTA format:</label>
                <textarea class="form-control" id="exampleFormControlTextarea1" rows="8"></textarea>
            </div>
            <div class="form-group">
                <label for="exampleFormControlSelect1">Select the type of encoding:</label>
                <select class="form-control" id="exampleFormControlSelect1">
                <option value="2">Encoding using one hot encoding</option>
                <option value="3">Encoding using frequency</option>
                <option value="4">Encoding using physicochemical properties</option>
                <option value="5">Encoding using digital signal processing</option>
                <option value="6">Encoding using TAPE</option>
                </select>
            </div>
            <div class="text-center">
                <button id="btn1" type='button' class="btn btn-success btn-lg">Calculate</button>
                <button type='button' class="btn btn-dark btn-lg" onclick="javascript:eraseText();">Clear</button>
            </div>
            
        </form>
    </div>
    <div hidden id="wait" class="text-center">
    <h2>The results are being processed, this will take a few seconds</h2>
    <i class="fa-5x fas fa-cog fa-spin"></i>
    <br>
    <br>
    </div>
    <div hidden id="all" class="card text-center">
    <h5 class="card-header">Results</h5>    
    <div class="card-body">
        <a id="download" target="_blank">
            <i class="fa fa-download fa-5x" style="color:black"></i>
        </a>
        <br>
        <br>
        <p>The compressed file generated by Peptipedia has a summary file with sequences used for the encoding process and ignored. Besides, It creates a CSV file with sequences encoded. For the case of Digital Signal Processing and Physicochemical Properties, eight encodings are generated using the groups of properties identified in our previous work [1]. The representation of sequences in Digital Signal Space is achieved using the Fast Fourier Transformation algorithm over the sequences encoding by physicochemical properties. Finally, in Natural Language Processing, Peptipedia employs the Tape Library for getting embedding representation of the sequences using pre-training models.</p>
    </div>
    </div>
</div>



<script>
$("#btn1").click(function(){
    var now = new Date().getTime();
    $('#wait').attr('hidden', false);       
    $('#all').attr('hidden', true);     
        $.ajax({
            'url': "http://localhost/encoding/results",
            'method': 'POST',
            'data' : { "sequences" : $("#exampleFormControlTextarea1").val(), "time": now, "option" : $("#exampleFormControlSelect1").val()}
        }).done( function(data) {
            $('#wait').attr('hidden', true);
            var dlAnchorElem = document.getElementById('download');
            dlAnchorElem.setAttribute("href", "jobs/service5/"+now+".tar.gz");
            dlAnchorElem.setAttribute("download",now+".tar.gz");
            console.log(data)
            $('#all').attr('hidden', false);
        });          
});
    
function eraseText() {
    document.getElementById("exampleFormControlTextarea1").value = "";
    $("#exampleFormControlTextarea1").focus();
}

</script>


